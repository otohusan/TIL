# 伝わるコードレビュー

## 1.

### コードレビューの利点

- コードの挙動を確認し、バグの混入を防ぐ
- より良いコードをチームで議論し、コードベースを健全に保つ
- 知識と経験を伝達する
- メンバー間でプロダクトの仕様を共有する
- 望ましい行動を議論し、開発チームの文化を醸成する

コードレビューの本質が批評であるからこそ難しい。

### 態度のアンチパターン

- レビュイーの過剰に防衛的または自動的な態度
- レビュアーの独善的な指摘、持って回った表現、人格への攻撃

### PR に求められる情報

- コードによって実現されるべき状態仕様
- 変更の前後での違い
- この実装を選んだ設計判断
- レビューで検討してほしい事柄
- 動作確認方法

### レビュアーに求められること

- 指摘事項への明確な根拠を示す
- 質問する際は、なぜそれを知りたいのかを明らかにする

レビューがすれ違う時は、相手の意図が掴めない時。意図がわからない時に「わからない」と言える関係性が不可欠。

### 信頼関係と視点

- 人ではなく、コードが解決する問題に視線を向ける
- 「問題 vs 私たち」という構図を保ち、悪意や怠惰ではなく共通の問題解決に向き合っていると感じられるようにする
- 共に問題解決に向き合う時間を通じて信頼関係を築く
- コードレビューの前提知識を揃え、PR 情報でも補助する

## 2.

- 文章に書かれている以上を読み取ろうとしない
- 質問の意図に悩んだら率直に尋ねる
- 行間を読まなくても情報が揃うコミュニケーション文化を整える
- 期日がある場合は明示する
- 自分の「正しさ」が状況によって変わり得ることを前提にする
- コーディングの細かいルールは暗黙知になりがちなので、最小限のルールを公開し継続的にメンテナンスする
- 自動化できるチェック項目をレビュアーが指摘しているなら自動化を検討する
- Lint の指摘に無批判で従うのではなく、妥当性を判断する
- 質問に即座に修正で応じるのではなく、対話を重ねる
- チェックしてほしいポイントを明確に示す
- 回りくどいコメントは信頼関係の欠如が原因と捉え、改善を図る
- 間違ったコメントをしても大丈夫という信頼を築く
- 予防線を張ったコメントが現れたら信頼関係を見直すサインと受け取る
- レビュアーが間違ったら、コードが分かりづらいというサインとして捉える
- アクションプランを明確にする
- コメントにタグを付けられるか検討する
- 関係者への確認が済んでいない PR は明示する

## 3.

- クイズ形式の指摘は避ける
- 命令ではなく理由を添えた提案を行う
- 性善説で考える
- 感謝したポイントを具体的に伝え、「ありがとう」と言う
- 相手の意図を断定しない
- まず共感を示す
- 作業ログを残す（例: Slack 等）
- レビューをゲーム化する: プラスのフィードバックを伝わるレビューにし、コメントでポジティブワードを 3 つ入れる
- ルールという形で縛りを設け、自分の目指すレビューの方向性を認識しやすいように
- 相談までの時間を決める
- 質問する時は自分の状態を伝える
- 選択肢を提示する際は、自分の考えや意見も添える
- 事実と想像を分ける
- 詳細を明示する
- 念のためを大切にする
- 聞きたいことを絞る
- コメント内容は相手が知らない情報に基づき、後から見返してもわかるレベルで残す
- 論破ではなく納得を目指す

<br>

## 感想、特に印象に残ったこと

- PR に求められる情報に、「この実装を選んだ設計判断」があると書いてあって、確かにと感じた。

  - コードのコメントだったり、PR だったりを通して、レビュアーがなぜこうしたのか理解できる PR にしたいと思った

- 文章に書かれている以上のことを読み取らない

  - 行間を読むことも大切だと思いつつも、勝手に相手の意思を推測したら、認識のズレが発生しそう
  - 質問きた時とかも、修正を求められてそうだから対応してしまおうではなくて、まず質問にそのまま答えるみたいな態度が大事そう

- 期日がある場合は明示する

  - そういった方法もあるのかと思ったので
  - レビュアー的には確かにどこまでレビューで指摘するかが変わりそう

- コメントにタグを付ける

  - [imo]とか[niche]とかコメントするときにつけるらしい
  - 個人的な意見ですが〜、修正するほどでもないですが〜、みたいな枕詞の代わりになるらしい

- 作業ログを残す（例: Slack 等）

  - slack に残すのが紹介されていた
  - PR に実装に至ったログみたいなのを起こすのも良いように感じた

- レビューをゲーム化する
  - 「プラスのフィードバックが伝わるレビューにする」みたいな目標を立てて、具体的に「ポジティブな指摘を 3 つ入れる」みたいな行動に落とし込むらしい
  - 自分のしたいレビューの指針にもなるのが良いらしい
  - 面白そうと感じたのでメモ
