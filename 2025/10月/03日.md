# 2025 年 10 月 03 日

## rails 空文字送るとバリデーションエラー２つ出る問題

以下のようなバリデーションがあった場合に**空文字**を送ると、`presence` と `format` の 2 つのバリデーションエラーが表示される

```rb
validates :email, presence: true, format: { with: Customer::VALID_EMAIL_REGEX }
```

以下のように `format` のバリデーションに `allow_blank` を付け足すと、空文字の場合は `format` のバリデーションチェックがスキップされるようになる

結果的に `presence` のエラーだけ表示される

```rb
validates :email, presence: true, format: { with: Customer::VALID_EMAIL_REGEX, allow_blank: true }
```
