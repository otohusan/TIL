# 2025 年 10 月 01 日

## rails scope

- 条件式に名前を付けられる

```rb
class Blog < ApplicationRecord
    scope :published, -> { where(published: true) }
end

# こんな感じで呼び出せる
Blog.published
```

## rails sort_by

### 降順にしたい場合

reverse を使う

```rb
users = User.all.sort_by { |u| u.age }.reverse
```

" - " をつける

```rb
users = User.all.sort_by { |u| -u.age }
```

### boolean で並び替えたい場合

boolean だと比較できないから ? を使う

以下の場合は (true -> false) の順になる

```rb
users = User.all.sort_by { |u| u.admin ? 0 : 1 }
```

### 複数の条件を指定

配列で複数条件を渡す

```rb
users = User.all.sort_by { |u| [u.age, u.name] }
```

## PR の分け方　感想

いくつかの場所で共通で使いたい要素を追加して、全部まとめて PR 作ると大きすぎと感じたから、共通部分と、どう使うかの例みたいな気分で１箇所だけ修正した PR を作成した。

その後に他の場所に共通の修正をしたいと思ったら、前の PR と依存する形でしか PR を作成できないことに気づいた。

いっそ全部まとめるか、共通部分の PR では具体的な修正せずに、どう使うつもりかコメント入れるとかが良い？
