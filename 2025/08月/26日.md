# 2025年8月26日

## with_options
以下のように共通のバリデーションが存在した場合に、with_optionsを使えば共通化できる
```rb
validates :user, presence: true
validates :item, presence: true
validates :price, presence: true
validates :email, presence: true
```

共通化した場合はこちら
```rb
with_options presence: true do
  validates :user
  validates :item

  # 入れ子にすることも可能
  with_options uniqueness: true do
    validates :price
    # 個別のバリデーションも付けられる
    validates :email, length: { minimum: 6 }
  end
end
```

## Rspecにて複数の特定テストを実行する
以下のように、行指定を複数個行うだけ

```bash
rspec hoge_spec.rb:10:20
```

## Railsのメモ化
### 例

```ruby
def expensive_method
  @expensive_method ||= heavy_calculation
end
```

`@expensive_method`が未定義の場合のみ`heavy_calculation`が実行され、2回目以降は保存された値が返されます。

### 注意
テストの際に、メモ化によって以前のテストケースにて作成された値が参照されることで、テストが失敗するようになっていた

