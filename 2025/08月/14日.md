# 2025年8月14日

## inverse_of

### 前置き

railsでは以下のようにhas_manyやbelongs_toを使えば関連付けを行える

```rb
class User < ApplicationRecord
  has_many :posts
end

class Post < ApplicationRecord
  belongs_to :user
end
```

こうすれば、user.post のように関連した値を取得できる

### inverse_of を使いたい時

Railsの規約通りの名前を使っていない時に便利

#### 使用例
以下のような、カスタム外部キーを含むモデル宣言では、双方向の関連付けを自動的に認識しなくなるから、inverse_ofを使う
```rb
class User < ApplicationRecord
  has_many :posts, inverse_of: :author
end

class Post < ApplicationRecord
  belongs_to :author, foreign_key: "user_id", class_name: "User"
end
```

### 参考
- [Railsガイド 双方向関連付け](https://railsguides.jp/association_basics.html#%E5%8F%8C%E6%96%B9%E5%90%91%E9%96%A2%E9%80%A3%E4%BB%98%E3%81%91:~:text=%E3%81%9F%E3%81%A8%E3%81%88%E3%81%B0%E3%80%81%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E5%A4%96%E9%83%A8%E3%82%AD%E3%83%BC%E3%82%92%E5%90%AB%E3%82%80%E6%AC%A1%E3%81%AE%E3%83%A2%E3%83%87%E3%83%AB%E5%AE%A3%E8%A8%80%E3%82%92%E8%80%83%E3%81%88%E3%81%A6%E3%81%BF%E3%81%BE%E3%81%97%E3%82%87%E3%81%86%E3%80%82)
