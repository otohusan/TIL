# 2025 年 12 月 17 日

## concern

Rails の concern は、複数のモデルやコントローラーで共通する処理（メソッドやバリデーションなど）を切り出して再利用できる仕組み。

`app/models/concerns` や `app/controllers/concerns` ディレクトリにモジュールとして定義し、`include`で利用する。

### 例

```rb
# app/models/concerns/auditable.rb
module Auditable
  extend ActiveSupport::Concern

  included do
    before_save :set_audit_info
  end

  def set_audit_info
    # 監査用の情報をセット
  end
end

# app/models/user.rb
class User < ApplicationRecord
  include Auditable
end
```

## rspec の it_behaves_like

共有したいテストを記述し、 it_behaves_like にて呼び出すことができる

```rb
shared_examples 'test1' do
  it 'something が 1 であること' do
    expect(something).to eq 1
  end
end

# テストを記述
describe 'hoge' do
  let(:something) { 1 }

  it_behaves_like 'test1'
end
```

include\_(context|examples) もあるが、it_behaves_like を使用すれば良い
