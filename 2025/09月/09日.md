# 2025 年 09 月 09 日

## メモ化と rspec テスト

前に実行されたテストによって、クラス内などでメモ化された値が、以降のテストでも参照されてしまうことへの対処法。

- メモ化を削除する
- instance_variable_set によって該当の値を nil に
- remove_instance_variable によってインスタンス変数を削除

### 参考

- https://thinkami.hatenablog.com/entry/2022/06/08/000420
- https://stackoverflow.com/questions/44259942/rspec-keeps-instance-variable-between-post-requests
- https://stackoverflow.com/questions/27088250/rspec-mocks-doubles-are-designed-to-only-last-for-one-example
